{
  "name": "timeline-inline-allow-deny",
  "versions": {
    "2025-12-23": {
      "statements": {
        "net.concrnt.core.resolve": [
          {
            "emit": "deny",
            "condition": {
              "op": "And",
              "args": [
                {
                  "op": "Load",
                  "const": "params.readListMode"
                },
                {
                  "op": "Contains",
                  "args": [
                    {
                      "op": "Load",
                      "const": "params.reader"
                    },
                    {
                      "op": "Load",
                      "const": "requester.ccid"
                    }
                  ]
                }
              ]
            }
          },
          {
            "emit": "allow",
            "condition": {
              "op": "And",
              "args": [
                {
                  "op": "Not",
                  "args": [
                    {
                      "op": "Load",
                      "const": "params.readListMode"
                    }
                  ]
                },
                {
                  "op": "Not",
                  "args": [
                    {
                      "op": "Contains",
                      "args": [
                        {
                          "op": "Load",
                          "const": "params.reader"
                        },
                        {
                          "op": "Load",
                          "const": "requester.ccid"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          }
        ],
        "net.concrnt.core.commit.create": [
          {
            "emit": "deny",
            "condition": {
              "op": "And",
              "args": [
                {
                  "op": "Load",
                  "const": "params.writeListMode"
                },
                {
                  "op": "Contains",
                  "args": [
                    {
                      "op": "Load",
                      "const": "params.writer"
                    },
                    {
                      "op": "Load",
                      "const": "requester.ccid"
                    }
                  ]
                }
              ]
            }
          },
          {
            "emit": "allow",
            "condition": {
              "op": "And",
              "args": [
                {
                  "op": "Not",
                  "args": [
                    {
                      "op": "Load",
                      "const": "params.writeListMode"
                    }
                  ]
                },
                {
                  "op": "Not",
                  "args": [
                    {
                      "op": "Contains",
                      "args": [
                        {
                          "op": "Load",
                          "const": "params.writer"
                        },
                        {
                          "op": "Load",
                          "const": "requester.ccid"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "paramSchema": {
        "type": "object",
        "properties": {
          "writeListMode": {
            "type": "boolean",
            "oneOf": [
              {
                "const": false,
                "title": "DenyList"
              },
              {
                "const": true,
                "title": "AllowList"
              }
            ],
            "default": false
          },
          "writer": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "readListMode": {
            "type": "boolean",
            "oneOf": [
              {
                "const": false,
                "title": "DenyList"
              },
              {
                "const": true,
                "title": "AllowList"
              }
            ],
            "default": false
          },
          "reader": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "writeListMode",
          "readListMode",
          "writer",
          "reader"
        ],
        "ui": {
          "writeListMode": {
            "ui:widget": "select"
          },
          "readListMode": {
            "ui:widget": "select"
          },
          "writer": {
            "ui:widget": "userPicker"
          },
          "reader": {
            "ui:widget": "userPicker"
          }
        }
      }
    },
    "2024-07-01": {
      "statements": {
        "timeline.distribute": {
          "condition": {
            "op": "Cond",
            "args": [
              {
                "op": "LoadParam",
                "const": "writeListMode"
              },
              {
                "op": "Contains",
                "args": [
                  {
                    "op": "LoadParam",
                    "const": "writer"
                  },
                  {
                    "op": "RequesterID"
                  }
                ]
              },
              {
                "op": "Not",
                "args": [
                  {
                    "op": "Contains",
                    "args": [
                      {
                        "op": "LoadParam",
                        "const": "writer"
                      },
                      {
                        "op": "RequesterID"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        },
        "timeline.message.read": {
          "condition": {
            "op": "Cond",
            "args": [
              {
                "op": "LoadParam",
                "const": "readListMode"
              },
              {
                "op": "Contains",
                "args": [
                  {
                    "op": "LoadParam",
                    "const": "reader"
                  },
                  {
                    "op": "RequesterID"
                  }
                ]
              },
              {
                "op": "Not",
                "args": [
                  {
                    "op": "Contains",
                    "args": [
                      {
                        "op": "LoadParam",
                        "const": "reader"
                      },
                      {
                        "op": "RequesterID"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        }
      },
      "paramSchema": {
        "type": "object",
        "properties": {
          "writeListMode": {
            "type": "boolean",
            "oneOf": [
              {
                "const": false,
                "title": "DenyList"
              },
              {
                "const": true,
                "title": "AllowList"
              }
            ],
            "default": false
          },
          "writer": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "readListMode": {
            "type": "boolean",
            "oneOf": [
              {
                "const": false,
                "title": "DenyList"
              },
              {
                "const": true,
                "title": "AllowList"
              }
            ],
            "default": false
          },
          "reader": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "writeListMode",
          "readListMode",
          "writer",
          "reader"
        ],
        "ui": {
          "writeListMode": {
            "ui:widget": "select"
          },
          "readListMode": {
            "ui:widget": "select"
          },
          "writer": {
            "ui:widget": "userPicker"
          },
          "reader": {
            "ui:widget": "userPicker"
          }
        }
      }
    }
  }
}
